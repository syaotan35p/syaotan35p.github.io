<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚µã‚¤ã‚³ãƒ­9å€‹ã‚¾ãƒ­ç›®è€ä¹…ä¸¦èµ°</title>
<style>
body {
    font-family: "Segoe UI","Hiragino Kaku Gothic ProN",Meiryo,sans-serif;
    margin: 0;
    padding: 20px;
    text-align: center;
    color: #eaf4ff;
    background: radial-gradient(circle at top, #1b2a4a 0%, #0a0f1f 60%);
    min-height: 100vh;
    transition: background 0.6s;
}

h1 {
    font-size: 1.8rem;
    margin-bottom: 16px;
}

.neon-basic {
    color: #fff;
    text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
}

.top-row {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 12px;
    flex-wrap: nowrap;
    max-width: 700px;
    margin: 0 auto 20px;
    flex-direction: column;
}

.stats-panel {
    display: flex;
    justify-content: center;
    gap: 16px;
    width: 100%;
    font-size: 1rem;
    font-weight: bold;
    padding: 6px;
    background: rgba(20,30,60,0.6);
    backdrop-filter: blur(8px);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.1);
    margin-bottom: 16px;
}

.stats-panel p { margin: 0; }

.dice-panel {
    width: 260px;
    padding: 8px;
    background: rgba(20,30,60,0.6);
    backdrop-filter: blur(8px);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.1);
    margin: 0 auto;
}

#dice-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: 6px;
    justify-items: center;
    align-items: center;
}

.dice {
    width: 52px;
    height: 52px;
    line-height: 52px;
    font-size: 2rem;
    font-weight: bold;
    border-radius: 10px;
    color: #eaf4ff;
    background: linear-gradient(145deg,#1e64c8,#0a3296);
    animation: roll 0.5s;
    display: flex;
    justify-content: center;
    align-items: center;
}

.highlight {
    background: linear-gradient(145deg,#ff4040,#c80000) !important;
    animation: glow 0.8s infinite alternate;
}

button {
    font-size: 1rem;
    padding: 8px 16px;
    margin: 6px;
    border-radius: 999px;
    border: none;
    color: #fff;
    background: linear-gradient(135deg,#4fc3f7,#7b60f4);
    cursor: pointer;
}

.history-panel {
    max-width: 520px;
    margin: 20px auto;
    padding: 12px;
    background: rgba(20,30,60,0.6);
    backdrop-filter: blur(8px);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.1);
}

.history-panel ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.history-panel li {
    font-family: monospace;
    font-weight: bold;
    color: #ffffff;
    text-align: center;
    margin-bottom: 6px;
}

.history-panel li.hit { color: #ff4040; }

.video-wrapper {
    max-width: 560px;
    aspect-ratio: 16/9;
    margin: 20px auto;
}

.video-wrapper iframe {
    width: 100%;
    height: 100%;
    border: 0;
}

.popup {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
}

.popup-content {
    background: #0f1a33;
    padding: 26px;
    border-radius: 16px;
}

@keyframes roll { from { transform: rotate(0deg); } to { transform: rotate(720deg); } }
@keyframes glow { from { box-shadow:0 0 8px rgba(255,80,80,0.6);} to { box-shadow:0 0 18px rgba(255,200,200,1);} }
</style>
</head>
<body>

<h1 class="neon-basic">ğŸ²ãƒ•ãƒ–ã•ã‚“ã¨9å€‹ã‚¾ãƒ­ç›®ä¸¦èµ°</h1>

<div class="stats-panel">
<p>å›æ•°:<span id="roll-count">0</span>ã€€ã€€5å€‹:<span id="count-5">0</span>ã€€6å€‹:<span id="count-6">0</span>ã€€7å€‹:<span id="count-7">0</span>ã€€8å€‹:<span id="count-8">0</span>ã€€9å€‹:<span id="count-9">0</span></p>
</div>

<div class="top-row">
<div class="dice-panel">
<div id="dice-container"></div>
</div>
</div>

<div>
<button onclick="rollDice()">9å€‹æŒ¯ã‚‹</button>
<button onclick="confirmReset()">ãƒªã‚»ãƒƒãƒˆ</button>
<button onclick="tweetResult()">ãƒã‚¹ãƒˆ</button>
</div>

<div class="video-wrapper">
<iframe src="https://www.youtube.com/embed/jtU-KcAoRZw" allowfullscreen></iframe>
</div>

<div class="history-panel">
<h3>ğŸ²å±¥æ­´ï¼ˆç›´è¿‘10å›ï¼‰</h3>
<ul id="history-list"></ul>
</div>

<!-- æ—¢å­˜ã‚¾ãƒ­ç›®POPUPï¼ˆç„¡å¤‰æ›´ï¼‰ -->
<div id="popup" class="popup">
<div class="popup-content">
<h2>ã‚¾ãƒ­ç›®é”æˆï¼</h2>
<p id="popup-message"></p>
<button onclick="closePopup()">OK</button>
</div>
</div>

<!-- â˜…è¿½åŠ ï¼šãƒªã‚»ãƒƒãƒˆç¢ºèªPOPUPï¼ˆåŒãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰ -->
<div id="reset-popup" class="popup">
<div class="popup-content">
<h2>æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ</h2>
<button onclick="doReset()">ã¯ã„</button>
<button onclick="closeResetPopup()">ã„ã„ãˆ</button>
</div>
</div>

<script>
// ===== æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆç„¡å¤‰æ›´ï¼‰ =====
let rollCount = 0, count5 = 0, count6 = 0, count7 = 0, count8 = 0, count9 = 0, lastZoro = 0;
const history = [];
let rolls = [];

const diceEmojis = {1:"1ï¸âƒ£",2:"2ï¸âƒ£",3:"3ï¸âƒ£",4:"4ï¸âƒ£",5:"5ï¸âƒ£",6:"6ï¸âƒ£"};
window.onload = rollDice;

function rollDice() {
    const c = document.getElementById("dice-container");
    c.innerHTML = "";
    rolls = [];
    for (let i = 0; i < 9; i++) {
        const r = Math.floor(Math.random() * 6) + 1;
        rolls.push(r);
        const d = document.createElement("div");
        d.className = "dice";
        d.textContent = r;
        c.appendChild(d);
    }
    const counts = {};
    rolls.forEach(n => counts[n] = (counts[n] || 0) + 1);
    const max = Math.max(...Object.values(counts));
    lastZoro = max;
    rolls.forEach((n, i) => { if (counts[n] >= 5) c.children[i].classList.add("highlight"); });
    rollCount++;
    document.getElementById("roll-count").textContent = rollCount;
    let bg = "";
    if (max === 5) { count5++; bg = "#ffe4b5"; }
    if (max === 6) { count6++; bg = "#ff1493"; }
    if (max === 7) { count7++; bg = "#7b60f4"; }
    if (max === 8) { count8++; bg = "#a5a5f5"; }
    if (max === 9) { count9++; bg = "linear-gradient(to right,#f59090,#fcd7a1,#fff9b1,#a5d4ad,#a3bce2,#a59aca,#cfa7cd)"; }
    if (bg) document.body.style.background = bg;
    updateCounts();
    if (history.length >= 10) history.shift();
    history.push({ text: rolls.join(", "), hit: max >= 5 });
    document.getElementById("history-list").innerHTML =
        history.map(h => `<li class="${h.hit ? 'hit' : ''}">${h.text}</li>`).join("");
    if (max >= 5) showPopup(`${max}å€‹ã‚¾ãƒ­ç›®é”æˆï¼`);
}

function updateCounts() {
    document.getElementById("count-5").textContent = count5;
    document.getElementById("count-6").textContent = count6;
    document.getElementById("count-7").textContent = count7;
    document.getElementById("count-8").textContent = count8;
    document.getElementById("count-9").textContent = count9;
}

function resetStats() {
    rollCount = count5 = count6 = count7 = count8 = count9 = 0;
    document.getElementById("roll-count").textContent = 0;
    updateCounts();
    document.body.style.background = "radial-gradient(circle at top, #1b2a4a 0%, #0a0f1f 60%)";
}

function tweetResult() {
    const rollsText = rolls.map(roll => diceEmojis[roll]).join(" ");
    const text = `#ãƒ•ãƒ–ã‚­ãƒ³ã‚°ãƒ€ãƒ \n\nğŸ²ğŸ¦Š9ã‚µã‚¤ã‚³ãƒ­ã‚¾ãƒ­ç›®è€ä¹…ä¸¦èµ°\nã€Œçµæœï¼š${rollCount}å›ç›®ã«${lastZoro}å€‹ã‚¾ãƒ­ç›®å‡ºãŸã‚ˆï¼ã€\n ${rollsText}\n https://syaotan35p.github.io/fubuki_dice9/`;
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`);
}

function showPopup(msg) {
    document.getElementById("popup-message").textContent = msg;
    document.getElementById("popup").style.display = "flex";
}

function closePopup() {
    document.getElementById("popup").style.display = "none";
}

// ===== è¿½åŠ ã‚³ãƒ¼ãƒ‰ï¼ˆã“ã“ã ã‘ï¼‰ =====
function confirmReset() {
    document.getElementById("reset-popup").style.display = "flex";
}
function closeResetPopup() {
    document.getElementById("reset-popup").style.display = "none";
}
function doReset() {
    closeResetPopup();
    resetStats();
}
</script>

</body>
</html>
