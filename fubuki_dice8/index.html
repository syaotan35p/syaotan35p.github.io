<!DOCTYPE html>
<html lang="ja">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>フブさんと8ダイス並走</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
            transition: background-color 0.5s, background-image 0.5s;
        }


        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

	.neon-basic {          /* シアンネオン風 */
	  font-size: 48px;
	  font-weight: 700;
	  color: #fff;
	  text-shadow: 
	    0 0 10px #00ffff,
	    0 0 20px #00ffff,
	    0 0 40px #00ffff,
	    0 0 80px #00ffff;
	}

	.dice {
	    display: inline-block;
	    font-size: 2rem;
	    font-weight: bold;          /* 文字を太字に */
	    color: #eaf4ff;             /* 文字は少し明るい青?白 */

	    margin: 5px;
	    width: 50px;
	    height: 50px;
	    line-height: 50px;
	    text-align: center;

	    border-radius: 8px;

	    /* 透き通った深い青の表現 */
	    background: linear-gradient(
	        145deg,
	        rgba(30, 100, 200, 0.85),
	        rgba(10, 50, 150, 0.85)
	    );

	    border: 1px solid rgba(180, 220, 255, 0.6);

	    /* ガラスっぽい立体感 */
	    box-shadow:
	        inset 0 2px 4px rgba(255, 255, 255, 0.3),
	        inset 0 -2px 6px rgba(0, 0, 0, 0.3),
	        0 4px 8px rgba(0, 0, 0, 0.3);

	    animation: roll 0.5s ease-in-out;
	}

	.highlight {
	    color: #fff;

	    animation: glow 0.8s ease-in-out infinite alternate;

	    /* 赤用の透き通ったグラデーション */
	    background: linear-gradient(
	        145deg,
	        rgba(255, 40, 40, 0.9),
	        rgba(200, 10, 10, 0.9)
	    ) !important;

	    border: 1px solid rgba(255, 180, 180, 0.9);

	    /* 赤ダイス用の立体感（暗くなりすぎない） */
	    box-shadow:
	        inset 0 2px 4px rgba(255, 220, 220, 0.6),
	        inset 0 -2px 4px rgba(120, 0, 0, 0.4),
	        0 4px 10px rgba(120, 0, 0, 0.5);
	}

        button {
            font-size: 1.2rem;
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
        }

        .stats {
            margin-top: 20px;
        }

        .bg1 {
            margin-top: 20px;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        iframe {
            width: 100%;
            height: 100%;
            max-width: 560px;
            max-height: 315px;
        }

        blockquote {
            margin: 20px auto;
            max-width: 600px;
            font-size: 0.9rem;
        }

        /* レスポンシブ対応 */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.2rem;
            }

            .dice {
                font-size: 1.5rem;
                width: 40px;
                height: 40px;
                line-height: 40px;
            }

            button {
                font-size: 1rem;
                padding: 8px 16px;
            }

            .stats h2 {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1rem;
            }

            .dice {
                font-size: 1.2rem;
                width: 30px;
                height: 30px;
                line-height: 30px;
            }

            button {
                font-size: 0.9rem;
                padding: 6px 12px;
            }
        }

        /* ポップアップ */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .popup-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            cursor: pointer;
        }

        /* アニメーション */
        @keyframes roll {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(360deg); }
            100% { transform: rotate(720deg); }
        }

	@keyframes glow {
	    from {
	        box-shadow:
	            0 0 8px rgba(255, 80, 80, 0.6),
	            inset 0 2px 4px rgba(255, 220, 220, 0.6);
	    }
	    to {
	        box-shadow:
	            0 0 16px rgba(255, 255, 230, 0.9),
	            inset 0 2px 4px rgba(255, 220, 220, 0.8);
	    }
	}

        /* 履歴表示 */
        #history {
            margin-top: 20px;
            text-align: center; /* センター寄せ */
            font-size: 0.9rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        #history ul {
            list-style-type: none;
            padding-left: 0;
        }
        #history li {
            margin-bottom: 5px;
        }

        /* Twitterボタン */
        #tweet-button {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>フブさんと８サイコロ並走2025</h1>
    <div id="dice-container">
        <!-- サイコロの結果はここに表示されます -->
    </div>
    <button onclick="rollDice()">サイコロ8つ振る</button>
    <button onclick="resetStats()">リセット</button>

    <!-- Twitter投稿ボタン -->
    <button id="tweet-button" onclick="tweetResult()">結果をツイート</button>

    <div class="stats">
        <h2>
            <p>振った回数: <span id="roll-count">0</span></p>
            <p>５個揃った: <span id="count-5">0</span>回</p>
            <p>６個揃った: <span id="count-6">0</span>回</p>
            <p>７個揃った: <span id="count-7">0</span>回</p>
            <p>８個揃った: <span id="count-8">0</span>回</p>
        </h2>
    </div>

    <div class="bg1">
        <iframe src="https://www.youtube.com/embed/hHOgcYP8R20?si=FgSuYh7TaiwK8MBB" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        <blockquote class="twitter-tweet">
            <p lang="ja" dir="ltr">━━━━?２３：００?━━━━<br><br>??&lt;今年のご利益POWERを使い切れ<br>ホロライブギャンブラーとして、今年最後の大勝負！！！！！<br><br>??サイコロ８個ゾロ目出す耐久配信??<br>(睡魔に勝てなかったら終了)<br><br>??豪運END??<a href="https://t.co/xjsf9GU5Hi">https://t.co/xjsf9GU5Hi</a> <a href="https://t.co/ct2VgHoQia">pic.twitter.com/ct2VgHoQia</a></p>&mdash; 白上フブキ????1stソロライブ 2/13「 FBKINGDOM “ANTHEM”」 (@shirakamifubuki) <a href="https://twitter.com/shirakamifubuki/status/1873302075565883833?ref_src=twsrc%5Etfw">December 29, 2024</a>
        </blockquote>
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>

    <!-- 履歴表示 -->
    <div id="history">
        <h3>サイコロ履歴 (直近10回)</h3>
        <ul id="history-list"></ul>
    </div>

    <!-- ポップアップ -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <h2>ゾロ目が出ました！</h2>
            <p id="popup-message">7個揃いました！</p>
            <button onclick="closePopup()">OK</button>
        </div>
    </div>

    <script>
        let rollCount = 0;
        let count5 = 0;
        let count6 = 0;
        let count7 = 0;
        let count8 = 0;
        let currentBackground = ''; // Track the current background

        // サイコロ履歴を保持
        const history = [];

        // 初回起動時にサイコロを表示する
        window.onload = function() {
            rollDice(); // ページ読み込み時にサイコロを振る
        };

        function showPopup(message) {
            const popup = document.getElementById('popup');
            document.getElementById('popup-message').textContent = message;
            popup.style.display = 'flex';
        }

        function closePopup() {
            const popup = document.getElementById('popup');
            popup.style.display = 'none';
        }

        function addToHistory(rolls) {
            // 履歴の数が10件を超えないように制限
            if (history.length >= 10) {
                history.shift(); // 最も古い結果を削除
            }
            history.push(rolls.join(', ')); // 新しい結果を追加

            // 履歴リストを更新
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = ''; // 現在の履歴をクリア
            history.forEach((item) => {
                const li = document.createElement('li');
                li.textContent = item;
                historyList.appendChild(li);
            });
        }

        function rollDice() {
            const diceContainer = document.getElementById('dice-container');
            diceContainer.innerHTML = ''; // Clear previous results

            const rolls = [];
            for (let i = 0; i < 8; i++) {
                const roll = Math.floor(Math.random() * 6) + 1;
                rolls.push(roll);
                const dice = document.createElement('div');
                dice.className = 'dice';
                dice.textContent = roll;
                diceContainer.appendChild(dice);
            }

            // Count occurrences
            const counts = {};
            rolls.forEach(num => counts[num] = (counts[num] || 0) + 1);

            // Highlight dice with 5 or more matches
            rolls.forEach((num, index) => {
                if (counts[num] >= 5) {
                    diceContainer.children[index].classList.add('highlight');
                }
            });

            // Find the highest match
            const maxMatch = Math.max(...Object.values(counts));

            // Update statistics
            rollCount++;
            document.getElementById('roll-count').textContent = rollCount;

            let newBackground = '';
            if (maxMatch === 5) {
                count5++;
                newBackground = "#ffe4b5"; //モカ
                showPopup('5個揃いました！');
            } else if (maxMatch === 6) {
                count6++;
                newBackground = '#ff1493'; //ディープピンク
                showPopup('6個揃いました！');
            } else if (maxMatch === 7) {
                count7++;
                newBackground = '#7b60f4';
                showPopup('7個揃いました！');
            } else if (maxMatch === 8) {
                count8++;
                newBackground = 'rainbow';
                showPopup('8個揃いました！');
            }

            // Apply the background if it changes
            if (newBackground && newBackground !== currentBackground) {
                if (newBackground === 'rainbow') {
		    document.body.style.backgroundImage = 'linear-gradient(to right,#f59090,#fcd7a1,#fff9b1,#a5d4ad,#a3bce2,#a59aca,#cfa7cd)'; /*パステル虹色*/
//		    document.body.style.backgroundImage = 'linear-gradient(to right,#de4141,#e8ac51,#f2e55c,#39a869,#4784bf,#5d5099,#a55b9a)'; /*少し薄めの虹色*/
//                  document.body.style.backgroundImage = 'linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet)';
                    document.body.style.backgroundColor = '';
                } else {
                    document.body.style.backgroundColor = newBackground;
                    document.body.style.backgroundImage = '';
                }
                currentBackground = newBackground;
            }

            document.getElementById('count-5').textContent = count5;
            document.getElementById('count-6').textContent = count6;
            document.getElementById('count-7').textContent = count7;
            document.getElementById('count-8').textContent = count8;

            // 履歴に追加
            addToHistory(rolls);
        }

        function resetStats() {
            rollCount = 0;
            count5 = 0;
            count6 = 0;
            count7 = 0;
            count8 = 0;

            document.getElementById('roll-count').textContent = rollCount;
            document.getElementById('count-5').textContent = count5;
            document.getElementById('count-6').textContent = count6;
            document.getElementById('count-7').textContent = count7;
            document.getElementById('count-8').textContent = count8;

            document.body.style.backgroundColor = '';
            document.body.style.backgroundImage = '';
            currentBackground = '';
        }

        function tweetResult() {
            const tweetText = `サイコロの結果！ ${rollCount}回目の挑戦でゾロ目出ました！ #フブさん並走 https://syaotan35p.github.io/fubuki_dice8/`;
            const tweetUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
            window.open(tweetUrl, '_blank');
        }
    </script>
</body>
</html>
